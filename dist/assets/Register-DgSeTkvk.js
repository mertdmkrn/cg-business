import{i as w}from"./helpers-DQ3rx_IO.js";import{_ as v,r as x,o as g,c as _,a as s,t as a,b as c,v as m,h as y,e as U,f as $,p as k,g as S}from"./index-CZpNX0ri.js";import{_ as E}from"./auth-left-W1GJUyPy.js";const N={mounted(){w()},data(){return{businessUser:{firstName:"",lastName:"",fullName:"",email:"",telephone:"",password:"",retryPassword:""},code1:"",code2:"",code3:"",code4:"",firstStepDone:!1}},methods:{async sendSmsCode(e){var o,d,i,r,l,p;try{if(e){this.businessUser.fullName=`${this.businessUser.firstName} ${this.businessUser.lastName}`;const n=await this.$appAxios.post("/businessuser/validate",this.businessUser);if((o=n==null?void 0:n.data)==null?void 0:o.hasError){this.$toastr.error(`${(d=n==null?void 0:n.data)==null?void 0:d.message}<hr>${(i=n==null?void 0:n.data)==null?void 0:i.validationErrors.map(u=>`${u.key}: ${u.value}`).join("<hr>")}`);return}}const t=await this.$appAxios.post("/user/sendtelephoneconfirmationcode",this.businessUser.telephone.replace(" ",""));((r=t==null?void 0:t.data)==null?void 0:r.hasError)?this.$toastr.warning((l=t==null?void 0:t.data)==null?void 0:l.message):(this.$toastr.success((p=t==null?void 0:t.data)==null?void 0:p.message),this.firstStepDone=!0)}catch{this.$toastr.error(this.$t("ErrorMessage"))}},async verifiedSmsCode(){var e,o;try{const d={target:this.businessUser.telephone.replace(" ",""),code:this.code1+this.code2+this.code3+this.code4},i=await this.$appAxios.post("/user/verifyconfirmationcode",d);((e=i==null?void 0:i.data)==null?void 0:e.hasError)?this.$toastr.warning((o=i==null?void 0:i.data)==null?void 0:o.message):this.save()}catch{this.$toastr.error(this.$t("ErrorMessage"))}},async save(){var l,p,t,f,n,b,u;this.businessUser.telephone=this.businessUser.telephone.replace(" ","");const e=await this.$appAxios.post("/businessuser/save",this.businessUser);let o=(l=e==null?void 0:e.data)==null?void 0:l.hasError;const d=(t=(p=e==null?void 0:e.data)==null?void 0:p.data)==null?void 0:t.token;if(o||!d){this.$toastr.error((f=e==null?void 0:e.data)==null?void 0:f.message);return}this.$toastr.success((n=e==null?void 0:e.data)==null?void 0:n.message),this.$store.commit("setToken",d);const i=await this.$appAxios.post("/businessuser/get",null,{headers:{Authorization:`Bearer ${d}`}});o=(b=i==null?void 0:i.data)==null?void 0:b.hasError;const r=(u=i==null?void 0:i.data)==null?void 0:u.data;this.$store.commit("setBusinessUser",r),setTimeout(()=>{this.$router.push({path:"/business-register"})},2e3)}}},h=e=>(k("data-v-0bbdee57"),e=e(),S(),e),C={class:"authentication-wrapper authentication-cover"},V={class:"authentication-inner row m-0"},A=h(()=>s("div",{class:"d-none d-lg-flex col-lg-8 p-0"},[s("div",{class:"auth-cover-bg auth-cover-bg-color d-flex justify-content-center align-items-center"},[s("img",{src:E,alt:"auth-login-cover",class:"auth-cover-bg","data-app-light-img":"pages/auth-left.png","data-app-dark-img":"pages/auth-left.png"})])],-1)),P={key:0,class:"d-flex col-12 col-lg-4 align-items-center p-sm-12 p-6"},T={class:"w-px-400 mx-auto pt-5"},B={class:"mb-1"},D={class:"mb-6"},I={id:"formAuthentication",class:"mb-6"},M={class:"mb-6"},j={for:"firstname",class:"form-label"},F=["placeholder"],Y={class:"mb-6"},H={for:"lastname",class:"form-label"},L=["placeholder"],q={class:"mb-6"},z={for:"email",class:"form-label"},G=["placeholder"],J={class:"mb-6"},K={for:"telephone",class:"form-label"},O={class:"mb-6 form-password-toggle"},Q={class:"form-label",for:"password"},W={class:"input-group input-group-merge"},X=h(()=>s("span",{class:"input-group-text cursor-pointer"},[s("i",{class:"ti ti-eye-off"})],-1)),Z={class:"mb-6 form-password-toggle"},R={class:"form-label",for:"password"},ss={class:"input-group input-group-merge"},es=h(()=>s("span",{class:"input-group-text cursor-pointer"},[s("i",{class:"ti ti-eye-off"})],-1)),ts={class:"mb-6 mt-8"},os={class:"form-check mb-8 ms-2"},rs=h(()=>s("input",{class:"form-check-input",type:"checkbox",id:"terms-conditions",name:"terms"},null,-1)),as={class:"form-check-label",for:"terms-conditions"},is={href:"javascript:void(0);"},ns={class:"text-center"},ls={style:{"margin-left":"4px"}},ds={key:1,class:"d-flex col-12 col-lg-4 align-items-center authentication-bg p-6 p-sm-12"},cs={class:"w-px-400 mx-auto mt-12 mt-5"},ms={class:"mb-1"},ps={class:"text-start mb-6"},us={class:"fw-medium d-block mt-1 text-heading"},hs={class:"mb-0"},fs={id:"twoStepsForm"},bs={class:"mb-6"},gs={class:"auth-input-wrapper d-flex align-items-center justify-content-between numeral-mask-wrapper"},_s=h(()=>s("input",{type:"hidden",name:"otp"},null,-1)),ys={class:"text-center"};function ws(e,o,d,i,r,l){const p=x("router-link");return g(),_("div",C,[s("div",V,[A,r.firstStepDone?(g(),_("div",ds,[s("div",cs,[s("h4",ms,a(e.$t("TwoStepVerification")),1),s("p",ps,[y(a(e.$t("TwoStepVerificationSpot"))+" ",1),s("span",us,a(this.businessUser.telephone.replace(" ","")),1)]),s("p",hs,a(e.$t("SecurityCodeText")),1),s("form",fs,[s("div",bs,[s("div",gs,[c(s("input",{type:"tel","onUpdate:modelValue":o[7]||(o[7]=t=>r.code1=t),class:"form-control auth-input h-px-50 text-center numeral-mask my-3",maxlength:"1",autofocus:""},null,512),[[m,r.code1]]),c(s("input",{type:"tel","onUpdate:modelValue":o[8]||(o[8]=t=>r.code2=t),class:"form-control auth-input w-25 h-px-50 text-center numeral-mask my-3",maxlength:"1"},null,512),[[m,r.code2]]),c(s("input",{type:"tel","onUpdate:modelValue":o[9]||(o[9]=t=>r.code3=t),class:"form-control auth-input w-25 h-px-50 text-center numeral-mask my-3",maxlength:"1"},null,512),[[m,r.code3]]),c(s("input",{type:"tel","onUpdate:modelValue":o[10]||(o[10]=t=>r.code4=t),class:"form-control auth-input w-25 h-px-50 text-center numeral-mask my-3",maxlength:"1"},null,512),[[m,r.code4]])]),_s]),s("button",{type:"button",onClick:o[11]||(o[11]=(...t)=>l.verifiedSmsCode&&l.verifiedSmsCode(...t)),class:"btn btn-primary d-grid w-100 mb-6"},a(e.$t("VerifyMyAccount")),1),s("div",ys,[y(a(e.$t("DidntGetTheCode"))+" ",1),s("a",{href:"javascript:void(0);",onClick:o[12]||(o[12]=(...t)=>l.sendSmsCode&&l.sendSmsCode(...t))},a(e.$t("Resend")),1)])])])])):(g(),_("div",P,[s("div",T,[s("h4",B,a(e.$t("AdventureStartsHere")),1),s("p",D,a(e.$t("CreateAnAccountRegister")),1),s("form",I,[s("div",M,[s("label",j,a(e.$t("FirstName")),1),c(s("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>r.businessUser.firstName=t),type:"text",class:"form-control",id:"firstname",name:"firstname",placeholder:e.$t("EnterYourFirstName"),autofocus:""},null,8,F),[[m,r.businessUser.firstName]])]),s("div",Y,[s("label",H,a(e.$t("LastName")),1),c(s("input",{"onUpdate:modelValue":o[1]||(o[1]=t=>r.businessUser.lastName=t),type:"text",class:"form-control",id:"lastname",name:"lastname",placeholder:e.$t("EnterYourLastName")},null,8,L),[[m,r.businessUser.lastName]])]),s("div",q,[s("label",z,a(e.$t("Email")),1),c(s("input",{"onUpdate:modelValue":o[2]||(o[2]=t=>r.businessUser.email=t),type:"text",class:"form-control",id:"email",name:"email",placeholder:e.$t("EnterYourEmail")},null,8,G),[[m,r.businessUser.email]])]),s("div",J,[s("label",K,a(e.$t("MobileNumber")),1),c(s("input",{"onUpdate:modelValue":o[3]||(o[3]=t=>r.businessUser.telephone=t),type:"text",class:"form-control",id:"telephone",name:"telephone",placeholder:"05xx xxxx xx xx"},null,512),[[m,r.businessUser.telephone]])]),s("div",O,[s("label",Q,a(e.$t("Password")),1),s("div",W,[c(s("input",{"onUpdate:modelValue":o[4]||(o[4]=t=>r.businessUser.password=t),type:"password",id:"password",class:"form-control",name:"password",placeholder:"········","aria-describedby":"password"},null,512),[[m,r.businessUser.password]]),X])]),s("div",Z,[s("label",R,a(e.$t("RePassword")),1),s("div",ss,[c(s("input",{"onUpdate:modelValue":o[5]||(o[5]=t=>r.businessUser.retryPassword=t),type:"password",id:"retryPassword",class:"form-control",name:"retryPassword",placeholder:"········","aria-describedby":"retryPassword"},null,512),[[m,r.businessUser.retryPassword]]),es])]),s("div",ts,[s("div",os,[rs,s("label",as,[s("a",is,a(e.$t("PrivacyPolicy")),1),y(" "+a(e.$t("AgreeTo"))+". ",1)])])]),s("button",{type:"button",onClick:o[6]||(o[6]=t=>l.sendSmsCode(!0)),class:"btn btn-primary d-grid w-100"},a(e.$t("SignUp")),1)]),s("p",ns,[s("span",null,a(e.$t("AlreadyHaveAnAccount")),1),U(p,{to:"/login"},{default:$(()=>[s("span",ls,a(e.$t("SignInInstead")),1)]),_:1})])])]))])])}const $s=v(N,[["render",ws],["__scopeId","data-v-0bbdee57"]]);export{$s as default};
