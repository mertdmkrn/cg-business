import{i as v}from"./helpers-DQ3rx_IO.js";import{_ as w,r as y,o as $,c as U,a as s,t as a,w as k,b as p,v as f,d as x,e as b,f as _,p as M,g as E}from"./index-GR731h19.js";import{_ as L}from"./auth-left-W1GJUyPy.js";const T={mounted(){v(),document.body.style.overflow="hidden"},unmounted(){document.body.style.overflow="auto"},data(){var t,o,r,n;return{businessUser:{email:((o=(t=this.$store.getters)==null?void 0:t._loginUser)==null?void 0:o.email)||"",password:((n=(r=this.$store.getters)==null?void 0:r._loginUser)==null?void 0:n.password)||"",isRememberMe:!1}}},methods:{async onLogin(){var t,o,r,n,i,d,c;try{this.businessUser.isRememberMe&&this.$store.commit("setLoginUser",this.businessUser);const e=await this.$appAxios.post("/businessuser/login",this.businessUser);let h=(t=e==null?void 0:e.data)==null?void 0:t.hasError;const u=(r=(o=e==null?void 0:e.data)==null?void 0:o.data)==null?void 0:r.token;if(h||!u){this.$toastr.error((n=e==null?void 0:e.data)==null?void 0:n.message);return}this.$toastr.success((i=e==null?void 0:e.data)==null?void 0:i.message),this.$store.commit("setToken",u);const l=await this.$appAxios.post("/businessuser/get",null,{headers:{Authorization:`Bearer ${u}`}});h=(d=l==null?void 0:l.data)==null?void 0:d.hasError;const g=(c=l==null?void 0:l.data)==null?void 0:c.data;setTimeout(()=>{this.$store.commit("setBusinessUser",g),g.business?(this.$router.push({path:"/"}),window.location.reload()):this.$router.push({path:"/business-register"})},2e3)}catch{this.$toastr.error(this.$t("ErrorMessage"))}}}},m=t=>(M("data-v-a64e4110"),t=t(),E(),t),A={class:"authentication-wrapper authentication-cover"},B={class:"authentication-inner row m-0"},C=m(()=>s("div",{class:"d-none d-lg-flex col-lg-8 p-0"},[s("div",{class:"auth-cover-bg auth-cover-bg-color d-flex justify-content-center align-items-center"},[s("img",{src:L,alt:"auth-login-cover","data-app-light-img":"pages/auth-left.png","data-app-dark-img":"pages/auth-left.png"})])],-1)),S={class:"d-flex col-12 col-lg-4 align-items-center p-sm-12 p-6"},V={class:"w-px-400 mx-auto mt-12 pt-5"},I={class:"mb-1"},P={class:"mb-6"},N={class:"mb-6 fv-plugins-icon-container"},j={for:"email",class:"form-label"},q=["placeholder"],D=m(()=>s("div",{class:"fv-plugins-message-container fv-plugins-message-container--enabled invalid-feedback"},null,-1)),O={class:"mb-6 form-password-toggle fv-plugins-icon-container"},R={class:"form-label",for:"password"},z={class:"input-group input-group-merge has-validation"},F=m(()=>s("span",{class:"input-group-text cursor-pointer"},[s("i",{class:"ti ti-eye-off"})],-1)),G=m(()=>s("div",{class:"fv-plugins-message-container fv-plugins-message-container--enabled invalid-feedback"},null,-1)),W={class:"my-8"},Y={class:"d-flex justify-content-between"},H={class:"form-check mb-0 ms-2"},J={class:"form-check-label",for:"remember-me"},K={class:"mb-0"},Q=["disabled"],X={class:"text-center"},Z={style:{"margin-left":"4px"}};function ss(t,o,r,n,i,d){const c=y("router-link");return $(),U("div",A,[s("div",B,[C,s("div",S,[s("div",V,[s("h4",I,a(t.$t("WelcomeToCG")),1),s("p",P,a(t.$t("LoginTopText")),1),s("form",{class:"mb-6 fv-plugins-bootstrap5 fv-plugins-framework",onSubmit:o[3]||(o[3]=k((...e)=>d.onLogin&&d.onLogin(...e),["prevent"]))},[s("div",N,[s("label",j,a(t.$t("Email")),1),p(s("input",{type:"email",class:"form-control",id:"email",name:"email","onUpdate:modelValue":o[0]||(o[0]=e=>i.businessUser.email=e),placeholder:t.$t("EnterYourEmail"),autofocus:"",required:""},null,8,q),[[f,i.businessUser.email]]),D]),s("div",O,[s("label",R,a(t.$t("Password")),1),s("div",z,[p(s("input",{type:"password",id:"password",class:"form-control","onUpdate:modelValue":o[1]||(o[1]=e=>i.businessUser.password=e),name:"password",placeholder:"········","aria-describedby":"password",required:""},null,512),[[f,i.businessUser.password]]),F]),G]),s("div",W,[s("div",Y,[s("div",H,[p(s("input",{class:"form-check-input","onUpdate:modelValue":o[2]||(o[2]=e=>i.businessUser.isRememberMe=e),type:"checkbox",id:"remember-me"},null,512),[[x,i.businessUser.isRememberMe]]),s("label",J,a(t.$t("RememberMe")),1)]),b(c,{to:"/forgot-password"},{default:_(()=>[s("p",K,a(t.$t("ForgotPassword")),1)]),_:1})])]),s("button",{type:"submit",class:"btn btn-primary d-grid w-100 waves-effect waves-light",style:{color:"white"},disabled:!(i.businessUser.email&&i.businessUser.password)},a(t.$t("Login")),9,Q)],32),s("p",X,[s("span",null,a(t.$t("NewOnOurPlatform")),1),b(c,{to:"/register"},{default:_(()=>[s("span",Z,a(t.$t("CreateAnAccount")),1)]),_:1})])])])])])}const is=w(T,[["render",ss],["__scopeId","data-v-a64e4110"]]);export{is as default};
